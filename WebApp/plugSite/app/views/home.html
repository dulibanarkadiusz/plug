<div class="wrapper" ng-controller="mainCtrl" ng-init="init()">
	<div id="status-container">
		<div class="blink error-box">{{errorString}}</div>
		<div class="spinner" ng-show="isDataProccessing">
			<span class="fa fa-cog fa-spin fa-3x fa-fw"></span>
		</div>
	</div>

	<div class="box main">
		<div class="plug-header">
			<div class="plug-icon"><i class="fa fa-plug"></i></div>
			<div class="plug-info">
				<div class="plug-name" ng-hide="editEnabled">
					{{device.Name}}
					<div class="edit-box">
						<i class="fa fa-pencil changeName-icon" data-toggle="tooltip" data-placement="right" title="Zmień nazwę urządzenia" aria-hidden="true" ng-click="enableEdit()"></i>
					</div>
				</div>
				<div class="plug-name" ng-show="editEnabled">
					<input type="text" ng-model="device.Name">
					<button class="btn btn-success btn-md btn-save" ng-click="saveDeviceName()">Zapisz</button>
				</div>
				<div class="plug-model">Model: {{device.Model}}</div>
				
			</div>
			<div class="plug-state pull-right">
				<label class="switch">
				  	<input type="checkbox" ng-change="switchStatus()" ng-model="state.IsOn">
				  	<span data-toggle="tooltip" title="Włącz/wyłącz wtyczkę" class="slider"></span>
				</label>
			</div>
		</div>

		<div id="schedule-container">
			<table class="table">
			<tr>
			<th>Dzień tygodnia</th>
			<th>Start</th>
			<th>Stop</th>
			<th>Usuń</th>
			</tr>
			<tr ng-repeat="x in records">
			<td> {{x.DayOfWeek | dayOfWeek}} </td>
			<td> {{x.HourStart}} </td>
			<td> {{x.HourEnd}} </td>
			<td> 
			<i class="fa fa-trash" aria-hidden="true"  ng-click="deleteRule(x.DayOfWeek, x.HourStart, x.HourEnd)"></i>
			</td>
			</tr>
			</table>
		</div>
		
		<div id="addRule-container">
		
			<div class="row">
				<div class="col-sm-3">Dzień tygodnia:</div>
				<div class="col-sm-3">Start:</div>
				<div class="col-sm-3">Stop:</div>
			</div>
		
			<div class="row">
				<div  class="col-sm-3">
					<select ng-model="rule.DayOfWeek">
					  <option value="1">Poniedziałek</option>
					  <option value="2">Wtorek</option>
					  <option value="3">Środa</option>
					  <option value="4">Czwartek</option>
					  <option value="5">Piątek</option>
					  <option value="6">Sobota</option>
					  <option value="0">Niedziela</option>
					</select>
				</div>
				<div  class="col-sm-3" >
					<input ng-model="rule.HourStart" type="time">
				</div>
				<div  class="col-sm-3" >
					<input ng-model="rule.HourEnd" type="time">
				</div>
				<div class="col-sm-3">
					<button class="btn btn-success btn-md btn-save" ng-click="saveRule()">Zapisz</button>
				</div>
			</div>
	</div>
</div>



<script>
  $(function(){
      $('[data-toggle="tooltip-indicator"]').tooltip(); 
      $('[data-toggle="tooltip"]').tooltip(); 
  });

  $(".indicatorLastToggle").mouseenter( function(){
  	$('[data-toggle="tooltip-indicator"]').tooltip('fixTitle');
  	$('[data-toggle="tooltip-indicator"]').tooltip('show');
  });

  $(".indicatorLastToggle").mouseleave( function(){
  	$('[data-toggle="tooltip-indicator"]').tooltip('hide');
  });
</script>